<%- contentFor('body') %>
<head>
    <link rel="stylesheet" href="/Public/css/editTrips.css">
</head>
<div class="editTrips-wrapper">
    <div class="table">
        <div class="roow head_row">
            <div class="head_data">#</div>
            <div class="head_data">Driver</div>
            <div class="head_data">Status</div>
            <div class="head_data tdata-btns">Action</div>
        </div>

        <% Trips.forEach(trip => { %>
            <div class="roow">
                <div class="tdata"><%= trip.id %></div>
                <div class="tdata"><%= trip.driver %></div>
                <div class="tdata">
                    <div class="status"
                        style="<%= trip.status ? 'background-color: #ffc017' : 'background-color: #384850'%>">
                        <%= trip.status ? 'active' : 'inactive' %>
                    </div> 
                </div>
                <div class="tdata tdata-btns">
                    <a href="" class="btn trackingBtn">
                        Details
                    </a>
                    <button onclick="editTrip('<%= trip.id %>')" class="btn trackingBtn btn_live">
                        Edit
                    </button>
                    <button class="btn trackingBtn">
                        Delete
                    </button>
                </div>
            </div>
        <% }) %>
    </div>

    <div id="editTrip" style="display: none;" class="editTrip" data-before="dfefae">
        <form class="editTripForm" action="" method="">
            <input  id="location" oninput="verifyEdit()" type="text" placeholder="GeoFence Location">
            <input  id="hiddenTripId" type="hidden" name="tripId">
            <button id="editTripSubmit" class="btn trackingBtn btnHover" disabled="true" type="submit">Edit</button>
        </form>
    </div>

    <script>
        editTrip = (tripId) => {
            document.getElementById('editTrip').style.display = 'unset'
            document.getElementById('editTrip').setAttribute('data-before', 'Edit Trip #' + tripId)
            document.getElementById('hiddenTripId').value = tripId
        }


        verifyEdit = () => {
            let field = document.getElementById('location').value

            if(field == '')
            document.getElementById('editTripSubmit').disabled = true
            else
            document.getElementById('editTripSubmit').disabled = false 
        }




        // var graphElem = document.querySelector('.graph');
        // graphElem.addEventListener('click', function (event) {
        //     event.target.setAttribute('data-before', 'anything');
        //});
    </script>
</div>